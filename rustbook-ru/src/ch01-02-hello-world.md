## Hello, World!

Итак, когда Rust уже установлен, можно приступать к написанию вашей первой программы. По традиции, для обучения мы напишем небольшую программу, которая напечатает "Привет, Мир!" в строке вывода.

> Обратите внимание, книга подразумевает, что читатели должны быть знакомы с командной строкой. Язык Rust не требует каких-то специальных редакторов исходного кода или инструментальных средств. Если вы предпочитаете использовать IDE (integrated development environment), вместо утилит командной строки, то можете пробовать свой любимый IDE. Многие IDE имеют разный уровень поддержки Rust, читайте детали в документации про IDE. Не так давно команда Rust фокусировалась на большей поддержке IDE и сделала определённый прогресс в данном направлении!

### Создание папки проекта

Вы начнёте с создания папки для хранения исходного кода Rust. Для Rust не важно где он находится, но для упражнений и проектов из книги, мы советуем создать директорию *projects* в домашнем каталоге и хранить их там.

Откройте терминал и введите следующие команды для создания каталога *projects* и подкаталога для проекта “Hello, world!” внутри *projects*.

Для Linux, macOS и PowerShell на Windows, введите:

```text
$ mkdir ~/projects
$ cd ~/projects
$ mkdir hello_world
$ cd hello_world
```

Для Windows в CMD, введите:

```cmd
> mkdir %USERPROFILE%\projects
> cd %USERPROFILE%\projects
> mkdir hello_world
> cd hello_world
```

### Написание и запуск первой Rust программы

Далее создайте новый исходный файл и назовите его *main.rs*. Файлы Rust всегда оканчиваются расширением *.rs*. Если используется более одного слова в названии, то разделите его символом "подчёркивание" (underscore). Например, как  *hello_world.rs*, а не как *helloworld.rs*.

Теперь откроем файл *main.rs* для редактирования и введём следующие строки кода:

<span class="filename">Название файла: main.rs</span>

```rust
fn main() {
    println!("Hello, world! Привет, Мир!");
}
```

<span class="caption">Листинг 1-1: Программа печатает <code>Hello, world!</code></span>

Сохраните файл и вернитесь в окно терминала. На Linux или macOS, введите следующие команды, чтобы скомпилировать и запустить файл:

```text
$ rustc main.rs # нажмите клавишу Enter
$ ./main # нажмите клавишу Enter
Hello, Rust world! Привет, Мир!
```

В Windows, введите команду `.\main.exe` вместо `./main`:

```powershell
> rustc main.rs # нажмите клавишу Enter
> main
Hello, Rust world! Привет, Мир!
```

Независимо от операционной системы, строка `Hello, world! Привет, Мир!` должна напечататься в терминальном окне. Если вы не увидели вывода, вернитесь в часть "решение проблем" ( [“Troubleshooting”]<comment> ) раздела инсталляции для вариантов получения помощи.</comment>

Если напечаталось `Hello, world! Привет, Мир!`, то примите наши поздравления! Вы написали программу на Rust. Что делает вас  Rust программистом — добро пожаловать!

### Анатомия программы на Rust

Давайте рассмотрим в деталях, что происходит в программе “Hello, world!”. Вот первый кусок пазла:

```rust
fn main() {

}
```

Эти строки определяют функцию в Rust. Функция `main` специальная: она всегда является первым кодом, который запускается в исполняемой программе на Rust. Первая строка объявляет функцию с именем `main` у которой нет параметров и она ничего не возвращает. Если бы тут были параметры, они были бы записаны внутри круглых скобок, `()`.

Также заметим, что тело функции обёрнуто в фигурные скобки (curly brackets) `{}`. В Rust они требуются вокруг всех тел функций. Хорошим стилем является размещение открывающей скобки в строке объявления функции, оставляя пробел между ними.

На момент написания этих строк, инструмент выполняющий автоматическое форматирование называется `rustfmt` и находится ещё в разработке. Если вы хотите использовать стандартный стиль во всех Rust проектах, то `rustfmt` отформатирует код в нужном стиле. Команда Rust планирует в конечном счёте включит данный инструмент в стандартный дистрибутив Rust, подобно `rustc` компилятору. Так что в зависимости от того, когда вы читаете данную книгу, то он возможно уже инсталлирован на ваш ПК! Загляните в документацию для деталей.

Содержимое функции `main`:

```rust
    println!("Hello, Rust world! Привет, Мир!");
```

Эта строка делает всю работу в этой маленькой программе: печатает текст на экран. Можно заметить четыре важных детали. Первая, Rust стилем является отступ из четырёх пробелов, а не табуляторов.

Второе, вызов `println!` является макросом. Если бы вызывалась функция, то она была бы введена как `println` (без восклицательного знака `!`). Более детальное обсуждение макросов Rust будет в главе 19. Сейчас вам достаточно знать, что использование символа `!` означает вызов макроса, а не обычной функции.

Третье, вы видите строку `"Hello, world! Привет, Мир!"`. Мы передаём эту строку как аргумент в `println!` и строка печатается на экран.

Четвёртое, в конце строки стоит точка с запятой (`;`), которая означает, что выражение закончилось и следующее выражение можно начинать опять. Большая часть строк в Rust коде заканчивается точкой с запятой.

### Компиляция и выполнение кода являются отдельными шагами

Только что вы выполнили вновь созданную программу, теперь изучим каждый шаг этого процесса.

Перед запуском программы, необходимо её скомпилировать Rust компилятором `rustc` с помощью ввода команды и передачи имени вашего исходного файла, например так:

```text
$ rustc main.rs
```

Если вы знакомы с C или C++, то заметили что это похоже на вызов `gcc` или `clang`. После успешной компиляции, Rust выдаст двоичный исполняемый файл.

На Linux, macOS и в PowerShell на Windows, можно увидеть исполняемый файл командой `ls` в командной оболочке. На Linux или macOS будет два файла. В PowerShell на Windows будет три файла, которые вы увидите в CMD.

```text
$ ls
main  main.rs
```

В CMD на Windows следует ввести следующие команды:

```cmd
> dir /B %= the /B option says to only show the file names =%
main.exe
main.pdb
main.rs
```

Здесь видно файл исходного кода с расширением *.rs*, исполняемый двоичный файл (*main.exe* в Windows, но *main* на всех других платформах), а при использовании  Windows, ещё файл включающий отладочную информацию с расширением *.pdb*. Отсюда запускаете файл *main* или *main.exe* командой:

```text
$ ./main # or .\main.exe on Windows
```

Если *main.rs* был с текстом “Hello, world!  Привет, Мир!”, то строка `Hello, world! Привет, Мир!` будет напечатана в терминале.

Если вы знакомы с динамическими языками вроде Ruby, Python или
JavaScript, то возможно вы не использовали компиляцию и запуск программы отдельными шагами. Rust является "заранее скомпилированным" ( *ahead-of-time compiled* ) языком. Это означает, что можно скомпилировать программу и передать исполняемый файл ещё кому то, а они могут могут его запустить, не имея локально установленного Rust. А если вы отдаёте файл *.rb*, *.py* или *.js*, то им необходимо иметь установленную реализацию для Ruby, Python или JavaScript соответственно. В этих языках нужна только одна команда для компиляции и запуска программы. Все является компромиссом в дизайне языков.

Только компиляция с помощью `rustc` подходит только для простой программы. По мере того как проект растёт, вам захотите управлять всеми опциями и упростить обмен своим кодом с другими. Далее, мы представим инструмент Cargo, который поможет в написании настоящих программ на Rust.


[“Troubleshooting”]: ch01-01-installation.html#troubleshooting
