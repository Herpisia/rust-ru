## Дополнения и ящики

Первые части состоящие из разделов системы, которые мы рассмотрим — это дополнения и ящики.

*Ящик (Раздел)*  — это наименьший размер рукописи, который сборщик Ржавчины рассматривает за раз. Даже если вы запустите `rustc` вместо `cargo` и передадите один файл с исходной рукописью (как мы уже делали в разделе «Написание и запуск программы на Ржавчине» Главы 1), сборщик считает этот файл ящиком. Ящики могут содержать разделы, и разделы могут быть определены в других файлах, которые собираются вместе с ящиком, как мы увидим в следующих главах.

Ящик может быть одним из двух видов данных: двоичный ящик или библиотечный ящик. *Двоичные ящики* — это программы, которые вы можете собрать в исполняемые файлы, которые вы можете запускать, например программу приказной строки или отдельный вычислитель. У каждого двоичного ящика должна быть функция с именем `main`, которая определяет, что происходит при запуске исполняемого файла. Все ящики, которые мы создали до сих пор, были двоичными ящиками.

*Библиотечные ящики* не имеют функции `main` и не собираются в исполняемый файл. Вместо этого они определяют возможность, предназначенную для совместного использования другими делами. Например, ящик `rand`, который мы использовали в [Главе 2]<!-- ignore --> обеспечивает возможность, которая порождает случайные числа. В большинстве случаев, когда Rustaceans говорят «ящик», они имеют в виду библиотечный ящик, и они используют «ящик» взаимозаменяемо с общим подходом программирования «библиотека».

*Корневой раздел ящика* — это исходный файл, из которого сборщик Ржавчины начинает собирать корневой раздел вашего ящика (мы подробно объясним разделы в главе [«Определение разделов для управления видимости и закрытости»]<!-- ignore -->).

*Дополнение* — это совокупность из одного или нескольких разделов, предоставляющий . Дополнение содержит файл *Cargo.toml*, в котором описывается, как собирать эти ящики. На самом деле Cargo — это дополнение, содержащее двоичный ящик для средства приказной строки, который вы использовали для создания своей рукописи. Дополнение Cargo также содержит библиотечный ящик, от которого зависит двоичный ящик. Другие дела тоже могут зависеть от библиотечного ящика Cargo, чтобы использовать тот же ход мыслей, что и средство приказной строки Cargo.

Дополнение может содержать сколько угодно двоичных ящиков, но не более одного библиотечного ящика. Дополнение должно содержать хотя бы один ящик, библиотечный или двоичный.

Давайте пройдёмся по тому, что происходит, когда мы создаём дополнение. Сначала введём приказ `cargo new`:

```console
$ cargo new my-project
     Created binary (application) `my-project` package
$ ls my-project
Cargo.toml
src
$ ls my-project/src
main.rs
```

После того, как мы запустили `cargo new`, мы используем `ls`, чтобы увидеть, что создал Cargo. В папке дела есть файл *Cargo.toml*, дающий нам дополнение. Также есть папка *src*, содержащая *main.rs*. Откройте *Cargo.toml* в письменном редакторе и обратите внимание, что в нём нет упоминаний о *src/main.rs*. Cargo следует соглашению о том, что *src/main.rs* — это корневой раздел двоичного ящика с тем же именем, что и у дополнения. Точно так же Cargo знает, что если папка дополнения содержит *src/lib.rs*, дополнение содержит библиотечный ящик с тем же именем, что и дополнение, а *src/lib.rs* является корневым разделом этого ящика. Cargo передаёт файлы корневого раздела ящика в `rustc` для сборки библиотечного или двоичного ящика.

Здесь у нас есть дополнение, которое содержит только *src/main.rs*, что означает, что оно содержит только двоичный ящик с именем `my-project`. Если дополнение содержит *src/main.rs* и *src/lib.rs*, он имеет два ящика: двоичный и библиотечный, оба с тем же именем, что и дополнение. Дополнение может иметь несколько двоичных ящиков, помещая их файлы в папку *src/bin*: каждый файл будет отдельным двоичным ящиком.


[«Определение разделов для управления видимости и закрытости»]: ch07-02-defining-modules-to-control-scope-and-privacy.html
[Главе 2]: ch02-00-guessing-game-tutorial.html#generating-a-random-number